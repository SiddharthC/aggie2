<!DOCTYPE html>
<html>

<head>
	<script type="text/javascript" src="lib/jquery.min.js"></script>
	<title>Start Bot</title>
	<script>
	$(document).ready(function(){
		$(document).on("click", ".stopBot", function(){
			$.ajax("/stop-twitter-bot", {
				type: "POST",
				data: {
					id: $(this).attr("id")
				}
			}).done(function(data){
				if(data){
					console.log(data);
				}
			});
		});

		$("#submit-search-btn").click(function(){
			$.ajax("/start-twitter-bot", {
				type: "POST",
				data: {
					source : "TWITTER",
					searchTerm: $("#search-term").val()
				}
			}).done(function(data) {
    			if(data){
    				$("#bots").append("<span>Started search bot for [" + $("#search-term").val() + "] </span>");
    				$("#bots").append("<input type=\"button\" id=" + data.id + " class=\"stopBot\" value=\"Stop\"/>");
    			}
    		});
		});

		$("#submit-search-btn-fb").click(function(){
			$.ajax("/start-fb-bot", {
				type: "POST",
				data: {
					source : "facebook",
					id: $("#search-term-fb").val(),
				}
			}).done(function(data) {
    			if(data){
    				$("#bots").append("<p>"+data.id+"</p>");
    				$("#bots").append("<span>Started search bot for [" + $("#search-term-fb").val() + "] </span>");
    				$("#bots").append("<input type=\"button\" id=" + data.id + " class=\"stopBot\" value=\"Stop\"/>");
    			}
    		});
		});
	});
	</script>
</head>

<body>
    <div id="start-bot-form">
    	Search term: <input id="search-term" type="text" name="search-term"/><br>
    	<input id="submit-search-btn" type="button" name="submit-search-term" value="Submit"/>
    </div>

	<div id="start-bot-form-fb">
    	Search term FB: <input id="search-term-fb" type="text" name="search-term-fb"/><br>
    	<input id="submit-search-btn-fb" type="button" name="submit-search-term-fb" value="Submit"/>
    </div>

    <div id="bots">

    </div>

</body>

</html>